<!-- packages/example-app/app/components/positionsList.html -->
<div>
  <h3>Товары</h3>

  <div class="search-bar">
    <!-- ★ ИСПРАВЛЕНИЕ: Все атрибуты внутри тега, комментарии снаружи, тег самозакрывающийся /> -->
    <input 
      id="search-input"
      type="text" 
      name="query" 
      placeholder="Найти товар..." 
      value="{{ data.viewState.query }}"
      atom-action="POST /action/filterPositions"  
      atom-target="#positionsList-container"
      atom-event="input"
    />
  </div>

  <form>
    <ul>
      {{^data.viewState.query}}
        {{#data.positions.items}}
        <li>
          <span>{{name}} ({{price}} руб.)</span>
          <button
            type="button"
            atom-action="POST /action/addItem"
            atom-target="#receipt-container"
            name="id"
            value="{{id}}"
          >
            Добавить
          </button>
        </li>
        {{/data.positions.items}}
      {{/data.viewState.query}}

      {{#data.viewState.query}}
        {{#data.viewState.filtered}}
        <li>
          <span>{{name}} ({{price}} руб.)</span>
          <button
            type="button"
            atom-action="POST /action/addItem"
            atom-target="#receipt-container"
            name="id"
            value="{{id}}"
          >
            Добавить
          </button>
        </li>
        {{/data.viewState.filtered}}

        {{^data.viewState.filtered}}
          <li>
            <span>По запросу "{{data.viewState.query}}" ничего не найдено.</span>
          </li>
        {{/data.viewState.filtered}}
      {{/data.viewState.query}}
    </ul>
  </form>
</div>